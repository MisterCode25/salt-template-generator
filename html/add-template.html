<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Créer un modèle</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <script type="module" src="../js/theme.js"></script>
</head>

<body class="page-enter add-template-body">
<script>
    requestAnimationFrame(() => {
        document.body.classList.add('page-enter-active');
    });
</script>

    <header class="app-header">
        <div class="app-title">New template</div>
        <nav class="top-menu">
            <button onclick="location.href='../index.html'" class="back-link">← Back</button>
        </nav>
    </header>

    <main class="add-template-page">

        <section class="add-hero">
            <div>
                <p class="eyebrow">Create once, reuse everywhere</p>
                <h1>Create a new template</h1>
                <p class="hero-text">Define the general info, write your texts for each language, and insert tokens like <code>{customer_name}</code> wherever data should be injected.</p>
                <div class="hero-chips">
                    <span class="chip">Email</span>
                    <span class="chip">SMS</span>
                    <span class="chip">Other</span>
                </div>
            </div>
            <div class="hero-note">
                <h4>How tokens work</h4>
                <p>Use braces to mark dynamic parts, e.g. <code>{due_date}</code>, <code>{ticket_id}</code>. Missing values will block copy and highlight the fields.</p>
                <p class="hint">New tokens are auto-added to the Data panel on the home screen.</p>
            </div>
        </section>

        <div class="add-template-grid">
            <section class="add-card">
                <div class="card-header">
                    <div>
                        <p class="eyebrow">General</p>
                        <h2>Template details</h2>
                    </div>
                </div>

                <div class="field-grid">
                    <div class="form-field">
                        <label>Title</label>
                        <input type="text" id="model-title" placeholder="Onboarding email">
                    </div>
                    <div class="form-field">
                        <label>Type</label>
                        <select id="model-type">
                            <option value="email">Email</option>
                            <option value="sms">SMS</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label>Category</label>
                        <select id="model-category">
                            <option value="">(optional)</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label>Display order</label>
                        <input type="number" id="model-order" value="1" min="1">
                    </div>
                </div>
            </section>

            <section class="add-card span-2">
                <div class="card-header">
                    <div>
                        <p class="eyebrow">Content</p>
                        <h2>Language texts</h2>
                    </div>
                    <p class="hint">Insert tokens anywhere in the text to be replaced at copy time.</p>
                </div>

                <div class="lang-grid">
                    <div class="lang-block">
                        <div class="lang-header">
                            <h3>Français</h3>
                            <span class="lang-badge">FR</span>
                        </div>
                        <textarea id="text-fr" data-autosize placeholder="Bonjour {customer_name}, ..."></textarea>
                    </div>

                    <div class="lang-block">
                        <div class="lang-header">
                            <h3>English</h3>
                            <span class="lang-badge">EN</span>
                        </div>
                        <textarea id="text-en" data-autosize placeholder="Hi {customer_name}, ..."></textarea>
                    </div>

                    <div class="lang-block">
                        <div class="lang-header">
                            <h3>Deutsch</h3>
                            <span class="lang-badge">DE</span>
                        </div>
                        <textarea id="text-de" data-autosize placeholder="Hallo {customer_name}, ..."></textarea>
                    </div>

                    <div class="lang-block">
                        <div class="lang-header">
                            <h3>Italiano</h3>
                            <span class="lang-badge">IT</span>
                        </div>
                        <textarea id="text-it" data-autosize placeholder="Ciao {customer_name}, ..."></textarea>
                    </div>
                </div>

                <div class="variant-editor">
                    <div class="variant-editor-head">
                        <div>
                            <p class="eyebrow">Variantes</p>
                            <h3>Ajouter des déclinaisons</h3>
                            <p class="hint">Créez des variantes nommées (onglets) pour proposer plusieurs versions du même template.</p>
                        </div>
                        <button type="button" class="secondary-btn" id="addVariantBtn">+ Ajouter une variante</button>
                    </div>
                    <div id="variantTabs" class="variant-tabs"></div>
                    <div id="variantPanels" class="variant-panels"></div>
                </div>
            </section>

            <aside class="add-card tips-card">
                <p class="eyebrow">Tips</p>
                <h3>Make it clear</h3>
                <ul class="tip-list">
                    <li>Keep titles short and action-oriented.</li>
                    <li>Use explicit tokens: <code>{customer_name}</code>, <code>{plan_name}</code>, <code>{due_date}</code>.</li>
                    <li>Add defaults in Manage Tokens to avoid empty fields.</li>
                    <li>Set display order to surface your most-used templates.</li>
                </ul>
            </aside>
        </div>

        <div class="actions-row">
            <button id="save-template" class="primary-btn">Save template</button>
        </div>

    </main>

<script type="module" src="../js/templateManager.js"></script>
</body>
</html>
